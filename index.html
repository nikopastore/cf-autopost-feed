<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Career Forge ‚Äî Ops & Analytics Hub</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <style>
    :root { --bg:#0b0c10; --card:#111318; --muted:#9aa4af; --fg:#e5e7eb; --accent:#60a5fa; --border:#1c1f26; }
    *{ box-sizing:border-box }
    body{ margin:0; font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; background:var(--bg); color:var(--fg); }
    header{ padding:28px 18px; border-bottom:1px solid #222; position:sticky; top:0; background:linear-gradient(180deg,rgba(11,12,16,.96),rgba(11,12,16,.78)); backdrop-filter: blur(4px); z-index:9;}
    h1{ margin:0 0 6px; font-size:22px }
    .sub{ color:var(--muted); font-size:12px }
    main{ max-width:1100px; margin:18px auto 60px; padding:0 16px }
    .grid{ display:grid; gap:16px }
    .cards{ grid-template-columns:repeat(auto-fit,minmax(240px,1fr)) }
    .card{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px }
    .card h3{ margin:0 0 8px; font-size:14px; color:#cbd5e1 }
    .kpi{ font-size:22px; font-weight:700 }
    .muted{ color:var(--muted) }
    .btnrow{ display:flex; flex-wrap:wrap; gap:10px; margin-top:10px }
    .btn{ display:inline-block; padding:10px 14px; border-radius:10px; border:1px solid var(--border); background:#0f1218; color:#cfe1ff; text-decoration:none; font-weight:600 }
    .btn:hover{ background:#121723 }
    h2.section{ margin:26px 0 10px; font-size:16px }
    ul.links{ list-style:none; padding:0; margin:0 }
    ul.links li{ padding:10px 0; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap }
    ul.links a{ color:#93c5fd; text-decoration:none; font-weight:600 }
    ul.links a:hover{ text-decoration:underline }
    .pill{ display:inline-block; padding:2px 8px; border-radius:999px; font-size:11px; background:#1c2430; color:#cfe1ff; }
    .small{ font-size:12px }
    .label{ color:#cbd5e1; font-size:12px; margin-top:6px }
    .stack { display:grid; gap:6px }
  </style>
</head>
<body>
  <header>
    <h1>Career Forge ‚Äî Ops & Analytics Hub</h1>
    <div class="sub">Automated posts + live analytics (powered by GitHub Actions & static files)</div>
  </header>
  <main>
    <div class="grid cards">
      <div class="card">
        <h3>üìä Total Posts</h3>
        <div id="kpi-total" class="kpi">‚Äî</div>
        <div id="kpi-updated" class="small muted">Last updated ‚Äî</div>
        <div class="btnrow">
          <a class="btn" href="analytics/dashboard.html">Open Dashboard</a>
          <a class="btn" href="analytics/latest_report.md">Latest Report (MD)</a>
        </div>
      </div>

      <div class="card">
        <h3>üèÜ Top Style / CTA</h3>
        <div class="kpi" id="kpi-style">‚Äî</div>
        <div class="kpi" id="kpi-cta">‚Äî</div>
        <div class="small muted">Averages from feature_summary.csv</div>
      </div>

      <div class="card">
        <h3>‚öôÔ∏è Generators & Feeds</h3>
        <div class="btnrow">
          <a class="btn" href="build_rss.py">build_rss.py</a>
          <a class="btn" href="scripts/make_x_feed.py">make_x_feed.py</a>
        </div>
        <div class="btnrow">
          <a class="btn" href="rss.xml">rss.xml</a>
          <a class="btn" href="rss_x.xml">rss_x.xml</a>
          <a class="btn" href="rss_x_live.xml"><span class="pill">LIVE</span> rss_x_live.xml</a>
        </div>
        <div class="small muted" style="margin-top:8px">Point your X Zap at <strong>rss_x_live.xml</strong> for a 1-item feed.</div>
      </div>

      <!-- NEW: Integrations card -->
      <div class="card">
        <h3>üîó Posting Integrations</h3>
        <div class="label">Zapier Zaps</div>
        <div class="btnrow stack">
          <a id="zap-x" class="btn" href="#" target="_blank" rel="noopener">Zapier ‚Äî X Zap</a>
          <a id="zap-li" class="btn" href="#" target="_blank" rel="noopener">Zapier ‚Äî LinkedIn Zap</a>
          <a id="zap-other" class="btn" href="#" target="_blank" rel="noopener">Zapier ‚Äî Other Zap</a>
        </div>
        <div class="label" style="margin-top:12px">Buffer Profiles</div>
        <div class="btnrow stack">
          <a id="buf-x-queue" class="btn" href="#" target="_blank" rel="noopener">Buffer ‚Äî X Queue</a>
          <a id="buf-x-sched" class="btn" href="#" target="_blank" rel="noopener">Buffer ‚Äî X Schedule</a>
          <a id="buf-li-queue" class="btn" href="#" target="_blank" rel="noopener">Buffer ‚Äî LinkedIn Queue</a>
          <a id="buf-li-sched" class="btn" href="#" target="_blank" rel="noopener">Buffer ‚Äî LinkedIn Schedule</a>
        </div>
        <div class="small muted" style="margin-top:10px">
          Edit the <strong>CONFIG</strong> block at the bottom of this page to insert your exact Zapier/Buffer links.
        </div>
      </div>

      <div class="card">
        <h3>üóÇÔ∏è Raw Data</h3>
        <div class="btnrow">
          <a class="btn" href="analytics/posts_features.csv">posts_features.csv</a>
          <a class="btn" href="analytics/feature_summary.csv">feature_summary.csv</a>
          <a class="btn" href="analytics/for_chatgpt.md">brief for ChatGPT</a>
        </div>
        <div class="small muted" style="margin-top:8px">Paste ‚Äúbrief for ChatGPT‚Äù into your AI to get style/CTA recommendations.</div>
      </div>
    </div>

    <h2 class="section">Quick Links</h2>
    <ul class="links">
      <li>
        <div>üîÅ Post workflow <span class="pill">.github/workflows/post.yml</span></div>
        <a href="https://github.com/">Open Actions</a>
      </li>
      <li>
        <div>üìà Analytics workflow <span class="pill">.github/workflows/analytics.yml</span></div>
        <a href="https://github.com/">Open Actions</a>
      </li>
      <li>
        <div>üß† Seeds <span class="pill">content/seeds_topics.txt</span></div>
        <a href="content/seeds_topics.txt">View</a>
      </li>
      <li>
        <div>‚ö° Zapier ‚Äî X Zap</div>
        <a id="ql-zap-x" href="#" target="_blank" rel="noopener">Open</a>
      </li>
      <li>
        <div>‚ö° Zapier ‚Äî LinkedIn Zap</div>
        <a id="ql-zap-li" href="#" target="_blank" rel="noopener">Open</a>
      </li>
      <li>
        <div>‚ö° Zapier ‚Äî Other Zap</div>
        <a id="ql-zap-other" href="#" target="_blank" rel="noopener">Open</a>
      </li>
      <li>
        <div>üì¶ Buffer ‚Äî X Queue</div>
        <a id="ql-buf-xq" href="#" target="_blank" rel="noopener">Open</a>
      </li>
      <li>
        <div>üì¶ Buffer ‚Äî X Schedule</div>
        <a id="ql-buf-xs" href="#" target="_blank" rel="noopener">Open</a>
      </li>
      <li>
        <div>üì¶ Buffer ‚Äî LinkedIn Queue</div>
        <a id="ql-buf-liq" href="#" target="_blank" rel="noopener">Open</a>
      </li>
      <li>
        <div>üì¶ Buffer ‚Äî LinkedIn Schedule</div>
        <a id="ql-buf-lis" href="#" target="_blank" rel="noopener">Open</a>
      </li>
    </ul>
  </main>

<script>
(async function(){
  const bust='?t='+Date.now();
  async function parseCSV(url){
    return new Promise((resolve,reject)=>{
      Papa.parse(url, { download:true, header:true, skipEmptyLines:true,
        complete: res=>resolve(res.data), error: err=>reject(err)
      });
    });
  }
  try{
    const posts = await parseCSV('analytics/posts_features.csv'+bust);
    const summary = await parseCSV('analytics/feature_summary.csv'+bust);

    // KPIs
    document.getElementById('kpi-total').textContent = posts.length.toString();
    const dt = posts.map(r=>r.pubDate_local).filter(Boolean).sort().pop();
    document.getElementById('kpi-updated').textContent = dt ? ('Last updated ' + new Date(dt).toLocaleString()) : 'Last updated ‚Äî';

    function rowsByFeature(f){ return summary.filter(r=>r.feature===f).sort((a,b)=> (+b.avg_eng_score||0) - (+a.avg_eng_score||0)); }
    const bestStyle = rowsByFeature('style')[0];
    const bestCTA   = rowsByFeature('cta')[0];
    document.getElementById('kpi-style').textContent = 'Style: ' + (bestStyle ? `${bestStyle.bucket} (${(+bestStyle.avg_eng_score).toFixed(2)})` : '‚Äî');
    document.getElementById('kpi-cta').textContent   = 'CTA: '   + (bestCTA   ? `${bestCTA.bucket} (${(+bestCTA.avg_eng_score).toFixed(2)})`   : '‚Äî');
  }catch(e){
    console.warn('Analytics files not ready yet.', e);
  }

  // ---------- CONFIG: paste your real links here ----------
  const LINKS = {
    zapier: {
      // Get these from Zapier: open your Zap ‚Üí copy URL
      x:        "https://zapier.com/app/zaps/<YOUR_X_ZAP_ID>/overview",
      linkedin: "https://zapier.com/app/zaps/<YOUR_LINKEDIN_ZAP_ID>/overview",
      other:    "https://zapier.com/app/zaps/<YOUR_OTHER_ZAP_ID>/overview"
    },
    buffer: {
      // Get these from Buffer: open profile ‚Üí copy Queue URL; Schedule tab URL for schedule
      xQueue:   "https://publish.buffer.com/profile/<YOUR_X_PROFILE_ID>/queue",
      xSched:   "https://publish.buffer.com/profile/<YOUR_X_PROFILE_ID>/settings/schedule",
      liQueue:  "https://publish.buffer.com/profile/<YOUR_LINKEDIN_PROFILE_ID>/queue",
      liSched:  "https://publish.buffer.com/profile/<YOUR_LINKEDIN_PROFILE_ID>/settings/schedule"
    }
  };
  // --------------------------------------------------------

  // Apply links to buttons + quick links (hide if not filled)
  function setHref(id, url){
    const el = document.getElementById(id);
    if(!el) return;
    if(url && !url.includes('<YOUR_')) { el.href = url; }
    else { el.style.display = 'none'; }
  }

  setHref('zap-x', LINKS.zapier.x);
  setHref('zap-li', LINKS.zapier.linkedin);
  setHref('zap-other', LINKS.zapier.other);

  setHref('buf-x-queue', LINKS.buffer.xQueue);
  setHref('buf-x-sched', LINKS.buffer.xSched);
  setHref('buf-li-queue', LINKS.buffer.liQueue);
  setHref('buf-li-sched', LINKS.buffer.liSched);

  setHref('ql-zap-x', LINKS.zapier.x);
  setHref('ql-zap-li', LINKS.zapier.linkedin);
  setHref('ql-zap-other', LINKS.zapier.other);
  setHref('ql-buf-xq', LINKS.buffer.xQueue);
  setHref('ql-buf-xs', LINKS.buffer.xSched);
  setHref('ql-buf-liq', LINKS.buffer.liQueue);
  setHref('ql-buf-lis', LINKS.buffer.liSched);
})();
</script>
</body>
</html>
